<form name="CustomLinkForm" ng-submit="CustomLinkForm.$valid && VM.save()">

    <md-input-container class="md-block" flex-gt-sm>
        <label>Link</label>
        <input ng-model="VM.Item.link" required name="link">

        <div ng-messages="CustomLinkForm.link.$error">
            <ng-messages-include src="{{ VM.ValidationMessagesTemplate }}"></ng-messages-include>
        </div>
    </md-input-container>

    <div ng-repeat="(key, locale) in VM.Locales">
        <md-toolbar class="md-accent">
            <div class="md-toolbar-tools">
                <h3><span>{{ locale.name }}</span></h3>
            </div>
        </md-toolbar>
    <md-input-container class="md-block" flex-gt-sm>
        <label>Title</label>
        <input ng-model="VM.Item.title[key]" required name="title-{{ key }}">

        <div ng-messages="CustomLinkForm['title-' + key].$error">
            <ng-messages-include src="{{ VM.ValidationMessagesTemplate }}"></ng-messages-include>
        </div>
    </md-input-container>
    </div>

    <md-input-container layout  flex-gt-sm>
        <label>Open in</label>
        <md-select ng-model="VM.Item.settings.target" flex>
            <md-option ng-repeat="target in targetOptions" value="{{target.value}}">
                {{target.label}}
            </md-option>
        </md-select>
    </md-input-container>

    <render-settings items="VM.Parent.settings.extraFields" ng-model="VM.Item.settings"></render-settings>

    <md-button ng-click="VM.add()" class="md-button md-raised md-accent" type="submit">
        <md-icon class="material-icons">save</md-icon>
        Save
    </md-button>
</form>
